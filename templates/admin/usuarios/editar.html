{% extends 'base_admin.html' %}
{% block title %}Editar Usuario{% endblock %}
{% block content %}
<h3 class="mb-4">✏️ Editar Usuario</h3>

<form action="{{ url_for('admin.actualizar_usuario', id=usuario.id) }}" method="POST" class="row g-3 needs-validation" novalidate>
  <div class="col-md-6">
    <label for="nombre" class="form-label">Nombre completo</label>
    <input type="text" class="form-control" id="nombre" name="nombre" value="{{ usuario.nombre }}" required>
  </div>
  <div class="col-md-6">
    <label for="username" class="form-label">Usuario</label>
    <input type="text" class="form-control" id="username" name="username" value="{{ usuario.username }}" required>
  </div>
    <div class="col-md-6">
    <label for="password" class="form-label">Nueva contraseña (opcional)</label>
    <div class="input-group">
        <input type="password" class="form-control" id="password" name="password">
        <button type="button" class="btn btn-outline-secondary" onclick="togglePassword()">
        <i class="fas fa-eye" id="toggleIcon"></i>
        </button>
    </div>
    </div>
  <div class="col-md-6">
    <label for="rol" class="form-label">Rol</label>
    <select class="form-select" name="rol" id="rol">
      <option value="cliente" {% if usuario.rol == 'cliente' %}selected{% endif %}>Cliente</option>
      <option value="admin" {% if usuario.rol == 'admin' %}selected{% endif %}>Administrador</option>
    </select>
  </div>
  <div class="col-12">
    <button class="btn btn-success btn-ripple" type="submit">
      <i class="fas fa-save me-1"></i> Guardar cambios
    </button>
    <a href="{{ url_for('admin.lista_usuarios') }}" class="btn btn-secondary ms-2">Cancelar</a>
  </div>
</form>
<script>
  function togglePassword() {
    const input = document.getElementById('password');
    const icon = document.getElementById('toggleIcon');
    if (input.type === 'password') {
      input.type = 'text';
      icon.classList.remove('fa-eye');
      icon.classList.add('fa-eye-slash');
    } else {
      input.type = 'password';
      icon.classList.remove('fa-eye-slash');
      icon.classList.add('fa-eye');
    }
  }
</script>

{% endblock %}
